"use strict";var Raven=Raven||{};Raven.makeInstance=function(e){var t=new e;t.super=e.prototype;return t};Raven.includeJS=function(e){document.write('<script type="text/javascript" src="../../src/'+e+'"></script>')};Raven.checkMobile=function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)!=null};Raven.includeJS("Utils.js");Raven.includeJS("Geom.js");Raven.includeJS("View.js");Raven.includeJS("Canvas.js");Raven.includeJS("GL.js");Raven.includeJS("Date.js");Raven.includeJS("Timer.js");Raven.includeJS("Animation.js");Raven.includeJS("EventDispatcher.js");Raven.includeJS("Physics.js");Raven.includeJS("App.js");Raven.roundTo=function(e,t){return Math.round(t*e)*(1/t)};Raven.DEGREES=180/Math.PI;Raven.RADIANS=Math.PI/180;Raven.resolveAngle=function(e){var t=e%360;return t<0?360+t:t};Raven.degreesToRadians=function(e){return Raven.resolveAngle(e)*Raven.RADIANS};Raven.radiansToDegrees=function(e){return Raven.resolveAngle(e*Raven.DEGREES)};Raven.getAngleRad=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};Raven.getAngleDeg=function(e,t){return Raven.radiansToDegrees(Raven.getAngleRad(e,t))};Raven.distance=function(e,t){var n=e-t;return Math.sqrt(n*n)};Raven.distance2D=function(e,t,n,r){var i=(e-n)*(e-n);var s=(t-r)*(t-r);return Math.sqrt(i+s)};Raven.distance3D=function(e,t,n,r,i,s){var o=(e-r)*(e-r);var u=(t-i)*(t-i);var a=(n-s)*(n-s);return Math.sqrt(o+u+a)};Raven.difference=function(e,t){return e-t};Raven.range=function(e,t,n){var r=Math.min(e,t);var i=Math.max(e,t);var s=i-r;s*=n;return s+r};Raven.randRange=function(e,t){return Raven.range(e,t,Math.random())};Raven.cosRange=function(e,t,n){return(1+Math.cos(Raven.degreesToRadians(e)))*.5*t+n};Raven.between=function(e,t,n){return n>=e&&n<=t};Raven.inBounds=function(e,t,n,r,i,s){return Raven.between(n,i,e)&&Raven.between(r,s,t)};Raven.constrain=function(e,t,n){return Math.min(t,Math.max(n,e))};Raven.constrain2=function(e,t,n){if(e.x<t.x){e.x=t.x}else if(e.x>n.x){e.x=n.x}if(e.y<t.y){e.y=t.y}else if(e.y>n.y){e.y=n.y}};Raven.constrain3=function(e,t,n){Raven.constrain2(e,t,n);if(e.z<t.z){e.z=t.z}else if(e.z>n.z){e.z=n.z}};Raven.wrap=function(e,t,n){if(e<t){var r=n-t;e=n-Raven.distance(e,t)%r}else if(e>n){e=e%n+t}return e};Raven.wrap2=function(e,t,n){e.x=Raven.wrap(e.x,t.x,n.x);e.y=Raven.wrap(e.y,t.y,n.y);return e};Raven.wrap3=function(e,t,n){e.x=Raven.wrap(e.x,t.x,n.x);e.y=Raven.wrap(e.y,t.y,n.y);e.z=Raven.wrap(e.z,t.z,n.z);return e};Raven.DOM=function(){};Raven.DOM.RESIZE="resize";Raven.DOM.SCROLL="onscroll";Raven.DOM.CLICK="onclick";Raven.DOM.DBL_CLICK="ondblclick";Raven.DOM.MOUSE_MOVE="mousemove";Raven.DOM.MOUSE_DOWN="mousedown";Raven.DOM.MOUSE_UP="mouseup";Raven.DOM.MOUSE_OVER="onmouseover";Raven.DOM.MOUSE_OUT="onmouseout";Raven.DOM.KEY_DOWN="keydown";Raven.DOM.KEY_PRESS="keypress";Raven.DOM.KEY_UP="keyup";Raven.DOM.DRAG_START="dragstart";Raven.DOM.DRAG="drag";Raven.DOM.DRAG_END="dragend";Raven.DOM.TOUCH_DOWN="touchstart";Raven.DOM.TOUCH_MOVE="touchmove";Raven.DOM.TOUCH_UP="touchend";Raven.DOM.GYRO_UPDATE="deviceorientation";Raven.DOM.ACCELERATION_UPDATE="devicemotion";Raven.DOM.getElemID=function(e){return document.getElementById(e)};Raven.DOM.watch=function(e,t,n){e.addEventListener(t,function(e){if(n)n(e)},false)};Raven.DOM.unwatch=function(e,t,n){e.removeEventListener(t,function(e){if(n)n(e)})};Raven.DOM.watchID=function(e,t,n){var r=Raven.DOM.getElemID(e);if(!r)return;r[t]=function(){n(e);return false}};Raven.DOM.unwatchID=function(e,t){var n=Raven.DOM.getElemID(e);if(!n)return;n[t]=null};var Key={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CTRL:17,SHIFT:16,CAPS:20,TAB:9,ENTER:13,SPACE:32,DELETE:46,BACKQUOTE:192,MINUS:189,EQUAL:187,LEFTBRACKET:219,RIGHTBRACKET:221,BACKSLASH:220,SEMICOLON:186,QUOTE:222,COMMA:188,PERIOD:190,SLASH:191,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,getKey:function(e){for(var t in this){if(this[t]==e)return t}return null}};(function(){var e=0;var t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}})();Raven.Vec2=function(e,t){this.x=e;this.y=t;this.set=function(e,t){this.x=e;this.y=t;return this};this.copy=function(){return new Raven.Vec2(this.x,this.y)};this.round=function(){return new Raven.Vec2(Math.round(this.x),Math.round(this.y))};this.add=function(e){var t=this.copy();t.x+=e.x;t.y+=e.y;return t};this.addN=function(e){var t=this.copy();t.x+=e;t.y+=e;return t};this.subtract=function(e){var t=this.copy();t.x-=e.x;t.y-=e.y;return t};this.subtractN=function(e){var t=this.copy();t.x-=e;t.y-=e;return t};this.multiply=function(e){var t=this.copy();t.x*=e.x;t.y*=e.y;return t};this.multiplyN=function(e){var t=this.copy();t.x*=e;t.y*=e;return t};this.divide=function(e){var t=this.copy();t.x/=e.x;t.y/=e.y;return t};this.divideN=function(e){var t=this.copy();t.x/=e;t.y/=e;return t};this.equals=function(e){return this.x==e.x&&this.y==e.y};this.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};this.normalize=function(){var e=1/this.length();this.x*=e;this.y*=e;return this};this.distance=function(e){return Raven.distance2D(this.x,this.y,e.x,e.y)};return this};Raven.Vec2.zero=function(){return new Raven.Vec2(0,0)};Raven.Vec2.one=function(){return new Raven.Vec2(1,1)};Raven.Vec2.random=function(e,t){return new Raven.Vec2(Math.random()*e,Math.random()*t)};Raven.Vec2.randomRange=function(e,t,n,r){return new Raven.Vec2(Raven.randRange(e,n),Raven.randRange(t,r))};Raven.Vec3=function(e,t,n){this.x=e;this.y=t;this.z=n;this.set=function(e,t,n){this.x=e;this.y=t;this.z=n;return this};this.copy=function(){return new Raven.Vec3(this.x,this.y,this.z)};this.round=function(){return new Raven.Vec3(Math.round(this.x),Math.round(this.y),Math.round(this.z))};this.add=function(e){var t=this.copy();t.x+=e.x;t.y+=e.y;t.z+=e.z;return t};this.addN=function(e){var t=this.copy();t.x+=e;t.y+=e;t.z+=e;return t};this.subtract=function(e){var t=this.copy();t.x-=e.x;t.y-=e.y;t.z-=e.z;return t};this.subtractN=function(e){var t=this.copy();t.x-=e;t.y-=e;t.z-=e;return t};this.multiply=function(e){var t=this.copy();t.x*=e.x;t.y*=e.y;t.z*=e.z;return t};this.multiplyN=function(e){var t=this.copy();t.x*=e;t.y*=e;t.z*=e;return t};this.divide=function(e){var t=this.copy();t.x/=e.x;t.y/=e.y;t.z/=e.z;return t};this.divideN=function(e){var t=this.copy();t.x/=e;t.y/=e;t.z/=e;return t};this.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z};this.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};this.normalize=function(){var e=1/this.length();this.x*=e;this.y*=e;this.z*=e;return this};this.distance=function(e){return Raven.distance3D(this.x,this.y,this.z,e.x,e.y,e.z)};return this};Raven.Vec3.zero=function(){return new Raven.Vec3(0,0,0)};Raven.Vec3.one=function(){return new Raven.Vec3(1,1,1)};Raven.Vec3.random=function(e,t,n){return new Raven.Vec3(Math.random()*e,Math.random()*t,Math.random()*n)};Raven.Vec3.randomRange=function(e,t,n,r,i,s){return new Raven.Vec3(Raven.randRange(e,r),Raven.randRange(t,i),Raven.randRange(n,s))};Raven.Matrix=function(){this.m=new Array(4);for(var e=0;e<4;++e)this.m[e]=new Array(4);this.toFloat32=function(){var e=new Float32Array(16);var t,n;for(t=0;t<4;++t){for(n=0;n<4;++n){e[t*4+n]=this.m[t][n]}}return e};this.multiply=function(e,t){var n=new ESMatrix;var r;for(r=0;r<4;r++){n.m[r][0]=e.m[r][0]*t.m[0][0]+e.m[r][1]*t.m[1][0]+e.m[r][2]*t.m[2][0]+e.m[r][3]*t.m[3][0];n.m[r][1]=e.m[r][0]*t.m[0][1]+e.m[r][1]*t.m[1][1]+e.m[r][2]*t.m[2][1]+e.m[r][3]*t.m[3][1];n.m[r][2]=e.m[r][0]*t.m[0][2]+e.m[r][1]*t.m[1][2]+e.m[r][2]*t.m[2][2]+e.m[r][3]*t.m[3][2];n.m[r][3]=e.m[r][0]*t.m[0][3]+e.m[r][1]*t.m[1][3]+e.m[r][2]*t.m[2][3]+e.m[r][3]*t.m[3][3]}for(r=0;r<4;r++){for(var i=0;i<4;i++){this.m[r][i]=n.m[r][i]}}};this.loadIdentity=function(){for(var e=0;e<4;e++){for(var t=0;t<4;t++){this.m[e][t]=e==t?1:0}}};this.frustum=function(e,t,n,r,i,s){var o=t-e;var u=r-n;var a=s-i;var f=new Raven.Matrix;if(i<=0||s<=0||o<=0||u<=0||a<=0)return;f.m[0][0]=2*i/o;f.m[0][1]=f.m[0][2]=f.m[0][3]=0;f.m[1][1]=2*i/u;f.m[1][0]=f.m[1][2]=f.m[1][3]=0;f.m[2][0]=(t+e)/o;f.m[2][1]=(r+n)/u;f.m[2][2]=-(i+s)/a;f.m[2][3]=-1;f.m[3][2]=-2*i*s/a;f.m[3][0]=f.m[3][1]=f.m[3][3]=0;this.multiply(f,this)};this.ortho=function(e,t,n,r,i,s){var o=t-e;var u=r-n;var a=s-i;var f;if(o==0||u==0||a==0)return;f.loadIdentity();f.m[0][0]=2/o;f.m[3][0]=-(t+e)/o;f.m[1][1]=2/u;f.m[3][1]=-(r+n)/u;f.m[2][2]=-2/a;f.m[3][2]=-(i+s)/a;this.multiply(f,this)};this.perspective=function(e,t,n,r){var i,s;s=Math.tan(e/360*Math.PI)*n;i=s*t;this.frustum(-i,i,-s,s,n,r)};this.rotate=function(e,t,n,r){var i=Math.sqrt(t*t+n*n+r*r);if(i>0){var s=Raven.toRadians(e);var o,u;u=Math.cos(s);o=Math.sin(s);var a,f,l,c,h,p,d,v,m;var g=new Raven.Matrix;t/=i;n/=i;r/=i;a=t*t;f=n*n;l=r*r;c=t*n;h=n*r;p=r*t;d=t*o;v=n*o;m=r*o;var y=1-u;g.m[0][0]=y*a+u;g.m[0][1]=y*c-m;g.m[0][2]=y*p+v;g.m[0][3]=0;g.m[1][0]=y*c+m;g.m[1][1]=y*f+u;g.m[1][2]=y*h-d;g.m[1][3]=0;g.m[2][0]=y*p-v;g.m[2][1]=y*h+d;g.m[2][2]=y*l+u;g.m[2][3]=0;g.m[3][0]=0;g.m[3][1]=0;g.m[3][2]=0;g.m[3][3]=1;this.multiply(g,this)}};this.scale=function(e,t,n){this.m[0][0]*=e;this.m[0][1]*=e;this.m[0][2]*=e;this.m[0][3]*=e;this.m[1][0]*=t;this.m[1][1]*=t;this.m[1][2]*=t;this.m[1][3]*=t;this.m[2][0]*=n;this.m[2][1]*=n;this.m[2][2]*=n;this.m[2][3]*=n};this.translate=function(e,t,n){this.m[3][0]+=this.m[0][0]*e+this.m[1][0]*t+this.m[2][0]*n;this.m[3][1]+=this.m[0][1]*e+this.m[1][1]*t+this.m[2][1]*n;this.m[3][2]+=this.m[0][2]*e+this.m[1][2]*t+this.m[2][2]*n;this.m[3][3]+=this.m[0][3]*e+this.m[1][3]*t+this.m[2][3]*n}};Raven.Rect=function(e,t,n,r){this.x=e;this.y=t;this.width=n;this.height=r;this.left=function(){return this.x};this.top=function(){return this.y};this.right=function(){return this.x+this.width};this.bottom=function(){return this.y+this.height};this.collision=function(e,t){return Raven.inBounds(e,t,this.x,this.y,this.right(),this.bottom())};this.overlap=function(e,t,n,r){return this.collision(e,t)||this.collision(e+n,t+r)}};Raven.Color=function(e,t,n,r){this.r=e!=null?e:255;this.g=t!=null?t:255;this.b=n!=null?n:255;this.a=r!=null?r:255;return this};Raven.Color.prototype.set=function(e,t,n,r){this.r=e!=null?e:255;this.g=t!=null?t:255;this.b=n!=null?n:255;this.a=r!=null?r:255;return this};Raven.Color.prototype.copy=function(){return new Raven.Color(this.r,this.g,this.b,this.a)};Raven.Color.prototype.gl=function(){var e=this.copy();e.r=this.r/255;e.g=this.g/255;e.b=this.b/255;e.a=this.a/255;return e};Raven.Color.prototype.css=function(){return"rgba("+Math.round(this.r)+","+Math.round(this.g)+","+Math.round(this.b)+","+this.a/255+")"};Raven.Color.black=function(){return new Raven.Color(0,0,0,255)};Raven.Color.white=function(){return new Raven.Color(255,255,255,255)};Raven.Color.red=function(){return new Raven.Color(255,0,0,255)};Raven.Color.green=function(){return new Raven.Color(0,255,0,255)};Raven.Color.blue=function(){return new Raven.Color(0,0,255,255)};Raven.Color.getHex=function(e){var t=parseInt(e,10);if(isNaN(t))return"00";t=Math.max(0,Math.min(t,255));return"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16)};Raven.Color.rgbToHex=function(e,t,n){return Raven.Color.getHex(e)+Raven.Color.getHex(t)+Raven.Color.getHex(n)};Raven.Color.hexToRGB=function(e){var t=e.charAt(0)=="#"?e.substring(1,7):e;var n=parseInt(t.substring(0,2),16);var r=parseInt(t.substring(2,4),16);var i=parseInt(t.substring(4,6),16);return new Raven.Color(n,r,i)};Raven.View=function(){this.width=0;this.height=0;this.canvas=null;this.autoClear=true;this.type=null;this.pixelRatio=1;this.renderer=null;this.backgroundColor=Raven.Color.black();this.clear=function(){this.renderer.clear(this.width,this.height,this.backgroundColor)};this.render=function(e){if(e)this.clear();if(this.type==Raven.View.VIEW_GL)this.renderer.render(this.width,this.height)};this.resize=function(e,t,n){this.width=e;this.height=t;var r=n?this.pixelRatio:1;this.canvas.width=e*r;this.canvas.height=t*r};this.init=function(e,t,n,r){var i=window.devicePixelRatio;this.pixelRatio=i;this.type=t;this.canvas=e;if(this.canvas&&this.canvas.getContext){switch(t){case Raven.View.VIEW_CANVAS:this.renderer=new Raven.Canvas(this.canvas.getContext("2d"));if(r){this.renderer.context.scale(i,i)}break;case Raven.View.VIEW_GL:this.renderer=new Raven.GL.Engine(this.canvas.getContext("experimental-webgl"),n);this.renderer.init();break}}else{console.log("Error establishing canvas (Raven.GL.init)",this.type)}}};Raven.View.VIEW_CANVAS="Raven::viewCanvas";Raven.View.VIEW_GL="Raven::viewGL";Raven.Canvas=function(e){this.context=e;var t=1;var n;var r=Raven.Color.white();var i=Raven.Color.white();var s=1;this.getLineWidth=function(){return s};this.getScale=function(){return t};this.fillColor=function(){return r};this.setLineWidth=function(e){s=e;this.context.lineWidth=e};this.setScale=function(e){t=e;this.context.scale(t,t)};this.setFillColor=function(e){r=e.copy();this.context.fillStyle=r.css()};this.setFillRGBA=function(e,t,n,i){r=new Raven.Color(e,t,n,i);this.context.fillStyle=r.css()};this.setFillRGB=function(e,t,n){this.setFillRGBA(e,t,n,255)};this.setStrokeColor=function(e){i=e.copy();this.context.strokeStyle=i.css()};this.setStrokeRGBA=function(e,t,n,r){i=new Raven.Color(e,t,n,r);this.context.strokeStyle=i.css()};this.setStrokeRGB=function(e,t,n){this.setStrokeRGBA(e,t,n,255)};this.drawCircle=function(e,t,n,r,i){this.context.beginPath();this.context.arc(e,t,n*.5,0,Math.PI*2,false);this.context.closePath();if(i)this.context.stroke();if(r)this.context.fill()};this.drawFont=function(e,t,n){this.context.fillText(e,t,n)};this.drawLine=function(e,t,n,r){this.begin();this.context.moveTo(e,t);this.context.lineTo(n,r);this.end(true,false)};this.drawCurve=function(e,t,n,r,i){this.begin();this.context.moveTo(e.x,e.y);this.context.quadraticCurveTo(t.x,t.y,n.x,n.y);this.end(r,i)};this.drawRect=function(e,t,n,r,i,s){this.context.fillRect(e,t,n,r);if(s)this.context.stroke();if(i)this.context.fill()};this.clear=function(e,t,n){this.context.fillStyle=n.css();this.drawRect(0,0,e,t,true,false)};this.begin=function(){this.context.beginPath()};this.end=function(e,t){this.context.closePath();if(e)this.context.stroke();if(t)this.context.fill()}};var gl=null;Raven.GL=function(){};Raven.GL.program=0;Raven.GL.Shader=function(e,t){this.name=e;this.type=t;this.shader=gl.createShader(t);if(this.shader==0){console.log("Raven.GL.Shader:: Error creating shader.");return 0}this.load=function(e){gl.shaderSource(this.shader,e);gl.compileShader(this.shader);var t=gl.getShaderParameter(this.shader,gl.COMPILE_STATUS);if(!t){console.log("Raven.GL.loadShader:: Error compiling shader.");console.log(gl.getShaderInfoLog(this.shader));gl.deleteShader(this.shader);return 0}return this};return this};Raven.GL.Shape=function(){this.vertices=null;this.normals=null;this.texCoords=null;this.indices=null;this.numIndices=0};Raven.GL.Engine=function(e){var t=this;gl=e;if(!gl){alert("WebGL failed, make sure your browser is up-to-date, broself.");return}this.init=function(){var e=gl.createProgram();if(!e)return 0;var t="";t+="attribute vec4 vPosition;       \n";t+="uniform float scaleX;           \n";t+="uniform float scaleY;           \n";t+="void main() {                   \n	";t+="gl_Position = vPosition;        \n";t+="}";var n="";n+="precision mediump float;                  \n";n+="void main() {                             \n	";n+="gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0 ); \n";n+="}";this.defaultVertexShader=new Raven.GL.Shader("defaultVertex",gl.VERTEX_SHADER);this.defaultFragmentShader=new Raven.GL.Shader("defaultFragment",gl.FRAGMENT_SHADER);this.defaultVertexShader.load(t);this.defaultFragmentShader.load(n);gl.attachShader(e,this.defaultVertexShader.shader);gl.attachShader(e,this.defaultFragmentShader.shader);gl.linkProgram(e);if(!gl.getProgramParameter(e,gl.LINK_STATUS)){console.log("Raven.GL.init:: Error linking program.");alert(gl.getProgramInfoLog(e))}Raven.GL.program=e;gl.clearColor(0,0,1,1);return true};this.render=function(e,t){gl.viewport(0,0,e,t);gl.clear(gl.COLOR_BUFFER_BIT);gl.useProgram(Raven.GL.program)};this.clear=function(e,t,n){var r=n.gl();gl.clearColor(r.r,r.g,r.b,r.a);return this};this.drawRect=function(e,t,n,r){var i=new Float32Array([e,t,0,e+n,t,0,e+n,t+r,0,e,t+r,0]);gl.vertexAttribPointer(0,3,gl.FLOAT,gl.FALSE,0,i);gl.enableVertexAttribArray(0);gl.drawArrays(gl.TRIANGLE_FAN,0,4)}};Raven.Date=function(){};Raven.Date.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Raven.Date.months=["January","February","March","April","May","June","July","August","September","October","November","December"];Raven.Date.MS_PER_MINUTE=6e4;Raven.Date.MS_PER_HOUR=36e5;Raven.Date.MS_PER_DAY=864e5;Raven.DateObject=function(e){this.seconds=-1;this.minutes=-1;this.hours=-1;this.date=-1;this.day=-1;this.month=-1;this.year=-1;this.milliseconds=-1;this.update(e)};Raven.DateObject.prototype.update=function(e){var t=new Date;if(e!=undefined)t=e;this.seconds=t.getSeconds();this.minutes=t.getMinutes();this.hours=t.getHours();this.day=t.getDay();this.date=t.getDate();this.month=t.getMonth();this.year=t.getFullYear();this.milliseconds=t.getMilliseconds();return this};Raven.DateObject.prototype.totalTime=function(){return this.milliseconds};Raven.DateObject.prototype.monthName=function(){return this.month>=0?String(Raven.Date.months[this.month]):""};Raven.DateObject.prototype.dayName=function(){return this.day>=0?String(Raven.Date.days[this.day]):""};Raven.DateObject.prototype.dayNumber=function(){return this.date};Raven.DateObject.prototype.am=function(){return this.hours<12};Raven.DateObject.prototype.pm=function(){return!this.am};Raven.Date.dateInstance=new Raven.DateObject(new Date);Raven.Date.update=function(){Raven.Date.dateInstance.update()};Raven.Date.timeDifference=function(e,t){var n=Math.abs(e.totalTime-t.totalTime);var r=new Date;r.milliseconds=n;return new Raven.DateObject(r)};Raven.Date.weeksToMS=function(e){return e*daysToMS(7)};Raven.Date.daysToMS=function(e){return e*hoursToMS(24)};Raven.Date.hoursToMS=function(e){return e*minutesToMS(60)};Raven.Date.minutesToMS=function(e){return e*secondsToMS(60)};Raven.Date.secondsToMS=function(e){return e*.001};Raven.Date.msToWeeks=function(e){return e/daysToMS(7)};Raven.Date.msToDays=function(e){return e/hoursToMS(24)};Raven.Date.msToHours=function(e){return e/minutesToMS(60)};Raven.Date.msToMinutes=function(e){return e/secondsToMS(60)};Raven.Date.msToSeconds=function(e){return e*1e3};Raven.Date.getCurrentYear=function(){return Raven.Date.dateInstance.year};Raven.Date.getCurrentMonth=function(){return Raven.Date.dateInstance.month};Raven.Date.getCurrentDay=function(){return Raven.Date.dateInstance.day};Raven.Date.getCurrentDate=function(){return Raven.Date.dateInstance.date};Raven.Date.getCurrentHour=function(){return Raven.Date.dateInstance.hours};Raven.Date.getCurrentMinute=function(){return Raven.Date.dateInstance.minutes};Raven.Date.getCurrentSecond=function(){return Raven.Date.dateInstance.seconds};Raven.StopWatch=function(){this.initTime=0;this.endTime=0;this.lastLap=0;this.ms=0};Raven.StopWatch.prototype.start=function(){this.initTime=getTimer();this.lastLap=this.initTime;this.read();return this};Raven.StopWatch.prototype.stop=function(){this.endTime=getTimer();this.ms=this.endTime-this.initTime;return this};Raven.StopWatch.prototype.read=function(){var e=getTimer();return e-this.initTime};Raven.StopWatch.prototype.lap=function(){var e=getTimer();this.ms=e-this.lastLap;this.lastLap=this.now;return this.ms};Raven.Timer=function(){this.timer=0};Raven.Timer.prototype.start=function(e,t){this.timer=setInterval(t,e)};Raven.Timer.prototype.startFPS=function(e,t){this.start(1e3/e,t)};Raven.Timer.prototype.stop=function(){clearInterval(this.timer)};Raven.FrameCountdown=function(e){this.currentFrame=0;this.totalFrames=e?e:0;this.restart=function(){this.currentFrame=this.totalFrames};this.update=function(){if(this.currentFrame>0)--this.currentFrame};this.active=function(){return this.currentFrame>0}};Raven.Timeline=function(){this.loop=true;this.currentFrame=0;this.totalFrames=0;this.frames={};this.onUpdate=null;this.addFrame=function(e,t,n){if(t>this.totalFrames)this.totalFrames=t;this.frames[t]={name:e,action:n}};this.goto=function(e){this.currentFrame=e%this.totalFrames;return this.currentFrame};this.gotoFrame=function(e){for(var t=0;t<this.totalFrames;++t){if(this.frames[t].name==e){this.currentFrame=t;return this.currentFrame}}};this.update=function(e){e=e==null?1:e;var t=this.loop?(this.currentFrame+1+e)%this.totalFrames+1:Math.min(this.totalFrames,Math.max(0,this.currentFrame+1));if(t!=this.currentFrame){this.currentFrame=t;if(this.onUpdate)this.onUpdate()}}};Raven.Interpolation=function(){this.speed=.5;this.spring=.5;this.target=1;this.value=0;this.velocity=0;this.running=false;this.autoDispose=true};Raven.Interpolation.prototype={start:function(){this.running=true;return this},stop:function(){this.running=false;return this},update:function(){if(!this.running)return this;this.velocity=(this.target-this.value)*this.speed+this.velocity*this.spring;this.value+=this.velocity;if(Raven.distance(this.value,this.target)<.1&&Raven.roundTo(this.velocity,10)<.1){this.velocity=0;this.value=this.target;if(this.autoDispose)this.stop()}return this}};Raven.Spritesheet=function(e,t,n,r){var i=this;this.frameRate=n!=null?n:60;this.currentFrame=0;this.totalFrames=t;this.loop=r==null?true:r;this.columns=t<6?t:6;this.loaded=false;this.onLoad=null;this.viewWidth=0;this.viewHeight=0;this.scaleX=1;this.scaleY=1;this.img=new Image;this.img.onload=function(){i.loaded=true;var e=Math.ceil(i.totalFrames/i.columns);i.viewWidth=Math.floor(this.width/i.columns);i.viewHeight=Math.floor(this.height/e);if(this.onLoad!=null)this.onLoad(this)};this.img.src=e;this.update=function(e,t){if(e%Math.floor(t/this.frameRate)==0){var n=this.currentFrame+1;if(this.loop){this.currentFrame=n}else{if(n<this.totalFrames)++this.currentFrame}}};this.render=function(e,t){if(!this.loaded)return this;var n=this.currentFrame%this.totalFrames;var r=n%this.columns*this.viewWidth;var i=Math.floor(n/this.columns)*this.viewHeight;e.context.drawImage(this.img,r,i,this.viewWidth,this.viewHeight,t.x,t.y,this.viewWidth,this.viewHeight)}};Raven.Ease=function(){};Raven.Ease._2PI=6.283185307179586;Raven.Ease._HALF_PI=1.5707963267948966;Raven.Ease.backIn=function(e,t,n,r,i){if(i==undefined)i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t};Raven.Ease.backOut=function(e,t,n,r,i){if(i==undefined)i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t};Raven.Ease.backInOut=function(e,t,n,r,i){if(i==undefined)i=1.70158;if((e/=r/2)<1)return n/2*e*e*(((i*=1.525)+1)*e-i)+t;return n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t};Raven.Ease.bounceIn=function(e,t,n,r){return n-easeOut(r-e,0,n,r)+t};Raven.Ease.bounceOut=function(e,t,n,r){if((e/=r)<1/2.75){return n*7.5625*e*e+t}else if(e<2/2.75){return n*(7.5625*(e-=1.5/2.75)*e+.75)+t}else if(e<2.5/2.75){return n*(7.5625*(e-=2.25/2.75)*e+.9375)+t}else{return n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}};Raven.Ease.bounceInOut=function(e,t,n,r){if(e<r/2)return easeIn(e*2,0,n,r)*.5+t;return easeOut(e*2-r,0,n,r)*.5+n*.5+t};Raven.Ease.circIn=function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t};Raven.Ease.circOut=function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t};Raven.Ease.circInOut=function(e,t,n,r){if((e/=r/2)<1)return-n/2*(Math.sqrt(1-e*e)-1)+t;return n/2*(Math.sqrt(1-(e-=2)*e)+1)+t};Raven.Ease.cubicIn=function(e,t,n,r){return n*(e/=r)*e*e+t};Raven.Ease.cubicOut=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t};Raven.Ease.cubicInOut=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e*e+t;return n/2*((e-=2)*e*e+2)+t};Raven.Ease.elasticIn=function(e,t,n,r,i,s){if(i==undefined)i=0;if(s==undefined)s=0;var o;if(e==0)return t;if((e/=r)==1)return t+n;if(!s)s=r*.3;if(!i||i<Math.abs(n)){i=n;o=s/4}else o=s/Raven.Ease._2PI*Math.asin(n/i);return-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*Raven.Ease._2PI/s))+t};Raven.Ease.elasticOut=function(e,t,n,r,i,s){var o;if(e==0)return t;if((e/=r)==1)return t+n;if(!s)s=r*.3;if(!i||i<Math.abs(n)){i=n;o=s/4}else o=s/Raven.Ease._2PI*Math.asin(n/i);return i*Math.pow(2,-10*e)*Math.sin((e*r-o)*Raven.Ease._2PI/s)+n+t};Raven.Ease.elasticInOut=function(e,t,n,r,i,s){var o;if(e==0)return t;if((e/=r/2)==2)return t+n;if(!s)s=r*.3*1.5;if(!i||i<Math.abs(n)){i=n;o=s/4}else o=s/Raven.Ease._2PI*Math.asin(n/i);if(e<1)return-.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*Raven.Ease._2PI/s)+t;return i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*Raven.Ease._2PI/s)*.5+n+t};Raven.Ease.expoIn=function(e,t,n,r){return e==0?t:n*Math.pow(2,10*(e/r-1))+t-n*.001};Raven.Ease.expoOut=function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t};Raven.Ease.expoInOut=function(e,t,n,r){if(e==0)return t;if(e==r)return t+n;if((e/=r/2)<1)return n/2*Math.pow(2,10*(e-1))+t;return n/2*(-Math.pow(2,-10*--e)+2)+t};Raven.Ease.linear=function(e,t,n,r){return n*e/r+t};Raven.Ease.quadIn=function(e,t,n,r){return n*(e/=r)*e+t};Raven.Ease.quadOut=function(e,t,n,r){return-n*(e/=r)*(e-2)+t};Raven.Ease.quadInOut=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e+t;return-n/2*(--e*(e-2)-1)+t};Raven.Ease.quartIn=function(e,t,n,r){return n*(e/=r)*e*e*e+t};Raven.Ease.quartOut=function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t};Raven.Ease.quartInOut=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e*e*e+t;return-n/2*((e-=2)*e*e*e-2)+t};Raven.Ease.quintIn=function(e,t,n,r){return n*(e/=r)*e*e*e*e+t};Raven.Ease.quintOut=function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t};Raven.Ease.quintInOut=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e*e*e*e+t;return n/2*((e-=2)*e*e*e*e+2)+t};Raven.Ease.sineIn=function(e,t,n,r){return-n*Math.cos(e/r*Raven.Ease._HALF_PI)+n+t};Raven.Ease.sineOut=function(e,t,n,r){return n*Math.sin(e/r*Raven.Ease._HALF_PI)+t};Raven.Ease.sineInOut=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t};Raven.Ease.strongIn=function(e,t,n,r){return n*(e/=r)*e*e*e*e+t};Raven.Ease.strongOut=function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t};Raven.Ease.strongInOut=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e*e*e*e+t;return n/2*((e-=2)*e*e*e*e+2)+t};Raven.Event=function(e,t){this.type=e;this.params=t};Raven.EventDispatcher=function(){this.listenerChain={}};Raven.EventDispatcher.prototype.buildListenerChain=function(){if(!this.listenerChain)this.listenerChain={}};Raven.EventDispatcher.prototype.addListener=function(e,t){if(!t instanceof Function)throw{message:"Listener isn't a function"};this.buildListenerChain();if(!this.listenerChain[e]){this.listenerChain[e]=[t]}else{this.listenerChain[e].push(t)}};Raven.EventDispatcher.prototype.hasListener=function(e){return typeof this.listenerChain[e]!="undefined"};Raven.EventDispatcher.prototype.removeListener=function(e,t){if(!this.hasEventListener(e))return false;var n=this.listenerChain[e].length;for(var r=0;r<n;r++){if(this.listenerChain[e][r]==t)this.listenerChain.splice(r,1)}};Raven.EventDispatcher.prototype.dispatchEvent=function(e){this.buildListenerChain();if(!this.hasListener(e.type)){return false}var t=this.listenerChain[e.type].length;for(var n=0;n<t;++n)this.listenerChain[e.type][n](e);return true};Raven.dispatcher=function(){};Raven.dispatcher._instance=new Raven.EventDispatcher;Raven.dispatcher.addListener=function(e,t){return Raven.dispatcher._instance.addListener(e,t)};Raven.dispatcher.hasListener=function(e){return Raven.dispatcher._instance.hasListener(e)};Raven.dispatcher.removeListener=function(e,t){return Raven.dispatcher._instance.removeListener(e,t)};Raven.dispatcher.dispatchEvent=function(e,t){return Raven.dispatcher._instance.dispatchEvent(e,t)};Raven.Physics=function(){};Raven.Physics.Particle=function(e,t,n){this.alive=true;this.acc=Raven.Vec3.zero();this.vel=Raven.Vec3.zero();this.pos=new Raven.Vec3(e?e:0,t?t:0,n?n:0);this.prev=this.pos.copy()};Raven.Physics.Particle.prototype.reset=function(){this.acc=Raven.Vec3.zero();return this};Raven.Physics.Particle.prototype.constrain=function(e,t){Raven.constrain3(this.pos,e,t);return this};Raven.Physics.Particle.prototype.inBounds=function(e,t){this.alive=Raven.inBounds(this.pos.x,this.pos.y,e.x,e.y,t.x,t.y);return this};Raven.Physics.Particle.prototype.wrap=function(e,t){Raven.wrap3(this.pos,e,t);return this};Raven.Physics.Particle.prototype.movement=function(){return this.acc.length()+this.vel.length()};Raven.Physics.Particle.prototype.update=function(e){this.prev=this.pos;this.vel=this.vel.add(this.acc.multiply(e));this.acc=Raven.Vec3.zero();this.pos=this.pos.add(this.vel.multiply(e));return this};Raven.Physics.Particle.prototype.difference=function(e){return new Raven.Vec3(Raven.difference(this.pos.x,e.pos.x),Raven.difference(this.pos.y,e.pos.y),Raven.difference(this.pos.z,e.pos.z))};Raven.Physics.Particle.prototype.dampen=function(e){this.acc=this.acc.subtract(this.vel.multiply(e));return this};Raven.Physics.F_GRAVITY=0;Raven.Physics.F_LINEAR=1;Raven.Physics.F_ROTATIONAL=2;Raven.Physics.Force=function(){this.pos=new Raven.Vec3.zero;this.size=100;this.strength=.1;this.type=Raven.Physics.F_GRAVITY;return this};Raven.Physics.LinearForce=function(){this.pos=new Raven.Vec3.zero;this.size=100;this.strength=.1;this.type=Raven.Physics.F_LINEAR;this.direction=0;this.directionStrength=1;return this};Raven.Physics.RotationalForce=function(){this.pos=new Raven.Vec3.zero;this.size=100;this.strength=.1;this.type=Raven.Physics.F_ROTATIONAL;this.rotationStrength=-45;return this};Raven.Physics.Force.applyForce=function(e,t,n,r){t=t.divideN(n);e.acc=e.acc.subtract(t.multiplyN(r));return e};Raven.Physics.LinearForce.applyForce=function(e,t,n,r,i,s){var o=Raven.degreesToRadians(i);e.vel.x+=Math.cos(o)*r*s;e.vel.y+=Math.sin(o)*r*s;return e};Raven.Physics.RotationalForce.applyForce=function(e,t,n,r,i){var s=Raven.getAngleRad(t,new Raven.Vec2.zero)+Raven.degreesToRadians(i);e.vel.x+=Math.cos(s)*r;e.vel.y+=Math.sin(s)*r;return e};Raven.Physics.Force.prototype.applyForce=function(e,t,n,r){Raven.Physics.Force.applyForce(e,t,n,r);return this};Raven.Physics.LinearForce.prototype.applyForce=function(e,t,n,r){Raven.Physics.LinearForce.applyForce(e,t,n,r,this.direction,this.directionStrength);return this};Raven.Physics.RotationalForce.prototype.applyForce=function(e,t,n,r){Raven.Physics.RotationalForce.applyForce(e,t,n,r,this.rotationStrength);return this};Raven.Physics.Force.prototype.update=Raven.Physics.LinearForce.prototype.update=function(e){var t=e.length;if(t<1)return;var n;var r;var i;var s;for(var o=0;o<t;++o){i=e[o];s=i.difference(this);r=s.length();if(r<this.size){r=Math.sqrt(r);n=this.strength*(1-r/this.size);this.applyForce(i,s,r,n);if(r<1&&i.movement()<.5)i.alive=false}}};Raven.Physics.RotationalForce.prototype.update=function(e){var t=e.length;if(t<1)return;var n;var r;var i;for(var s=0;s<t;++s){i=e[s];r=Raven.distance3D(i.pos.x,i.pos.y,i.pos.z,this.pos.x,this.pos.y,this.pos.z);if(r<this.size){r=Math.sqrt(r);n=this.strength*(1-r/this.size);this.applyForce(i,i.difference(this),r,n);if(r<1&&i.movement()<.5)i.alive=false}}};Raven.Physics.ParticleController=function(){this.dampen=Raven.Vec3.zero();this.forces=[];this.particles=[];this.time=Raven.Vec3.one();this.minBounds=Raven.Vec3.zero();this.maxBounds=Raven.Vec3.one();this.wrap=true};Raven.Physics.ParticleController.prototype.addParticle=function(e){this.particles.push(e)};Raven.Physics.ParticleController.prototype.addParticlePos=function(e,t,n){this.addParticle(new Raven.Physics.Particle(e,t,n))};Raven.Physics.ParticleController.prototype.removeParticle=function(e){this.particles.splice(e,1)};Raven.Physics.ParticleController.prototype.removeDeadParticles=function(){for(var e=0;e<this.totalParticles();++e){if(!this.particles[e].alive)this.removeParticle(e)}};Raven.Physics.ParticleController.prototype.totalParticles=function(){return this.particles.length};Raven.Physics.ParticleController.prototype.addForce=function(e){this.forces.push(e)};Raven.Physics.ParticleController.prototype.removeForce=function(e){this.forces.splice(e,1)};Raven.Physics.ParticleController.prototype.totalForces=function(){return this.forces.length};Raven.Physics.ParticleController.prototype.update=function(){var e=this.totalForces();for(var t=0;t<e;++t){this.forces[t].update(this.particles)}for(t=0;t<this.totalParticles();++t){this.particles[t].update(this.time);this.particles[t].dampen(this.dampen);if(this.wrap){this.particles[t].wrap(this.minBounds,this.maxBounds)}else{this.particles[t].inBounds(this.minBounds,this.maxBounds)}}};Raven.AppHandler=this;Raven.App=function(){this.frameNum=0;this.frameRate=60;this.autoClear=true;this.fullsize=true;this.supportMobile=false;this.mouseX=-1;this.mouseY=-1;this.isMousePressed=false;this.touchPoints=[];this.isMobile=false;this.view=null;this.autoClear=true;this.type=null;this.canvas=null;this.keysDown={};this.pixelRatio=1;this.enableRetina=false;this.acceleration=Raven.Vec3.zero();this.gyro=Raven.Vec3.zero();this.browserName=navigator.appName,this.browserCodeName=navigator.appCodeName;this.browserVersion=navigator.appVersion;this.cookieEnabled=navigator.cookieEnabled;this.platform=navigator.platform;Raven.AppHandler=this};Raven.App.prototype.autoRender=function(){window.requestAnimationFrame(Raven.AppHandler.autoRender);Raven.AppHandler.updateHandler()};Raven.App.prototype.touchHandler=function(e){var t=Raven.AppHandler;t.touchPoints=[];var n=e.targetTouches;var r=n.length;for(var i=0;i<r;++i){t.touchPoints[i]={id:n[i].identifier,x:n[i].clientX,y:n[i].clientY}}n=null;var s=e.changedTouches;r=s.length;switch(e.type){case Raven.DOM.TOUCH_DOWN:for(i=0;i<r;++i)t.touchDown(s[i].identifier,s[i].clientX,s[i].clientY);break;case Raven.DOM.TOUCH_MOVE:for(i=0;i<r;++i)t.touchMove(s[i].identifier,s[i].clientX,s[i].clientY);break;case Raven.DOM.TOUCH_UP:for(i=0;i<r;++i)t.touchUp(s[i].identifier,s[i].clientX,s[i].clientY);break}n=null};Raven.App.prototype.mobileHandler=function(e){var t=Raven.AppHandler;e.preventDefault();if(e.type==Raven.DOM.TOUCH_DOWN||e.type==Raven.DOM.TOUCH_MOVE||e.type==Raven.DOM.TOUCH_UP){total=e.changedTouches.length}switch(e.type){case Raven.DOM.TOUCH_DOWN:case Raven.DOM.TOUCH_MOVE:case Raven.DOM.TOUCH_UP:t.touchHandler(e);break;case Raven.DOM.GYRO_UPDATE:t.gyro.x=Raven.roundTo(e.beta,100);t.gyro.y=Raven.roundTo(e.alpha,100);t.gyro.z=Raven.roundTo(e.gamma,100);break;case Raven.DOM.ACCELERATION_UPDATE:t.acceleration.x=Raven.roundTo(e.accelerationIncludingGravity.x/9.81,100);t.acceleration.y=Raven.roundTo(e.accelerationIncludingGravity.y/9.81,100);t.acceleration.z=Raven.roundTo(e.accelerationIncludingGravity.z/9.81,100);break}};Raven.App.prototype.evtHandler=function(e){var t=Raven.AppHandler;switch(e.type){case Raven.DOM.RESIZE:if(t.fullsize){t.resize(window.innerWidth,window.innerHeight,this.enableRetina);t.renderHandler()}break;case Raven.DOM.KEY_DOWN:t.keysDown[e.keyCode]=true;t.keyDown(e);break;case Raven.DOM.KEY_PRESS:t.keyPress(e);break;case Raven.DOM.KEY_UP:delete t.keysDown[e.keyCode];t.keyUp(e);break;case Raven.DOM.MOUSE_DOWN:t.mouseX=e.clientX;t.mouseY=e.clientY;t.isMousePressed=true;t.mouseDown(e.clientX,e.clientY);break;case Raven.DOM.MOUSE_MOVE:t.mouseX=e.clientX;t.mouseY=e.clientY;t.mouseMove(e.clientX,e.clientY);break;case Raven.DOM.MOUSE_UP:t.mouseUp(e.clientX,e.clientY);t.mouseX=-1;t.mouseY=-1;t.isMousePressed=false;break}};Raven.App.prototype.updateHandler=function(){Raven.AppHandler.update();Raven.AppHandler.renderHandler();++Raven.AppHandler.frameNum};Raven.App.prototype.renderHandler=function(){if(Raven.AppHandler.autoClear){Raven.AppHandler.view.clear()}if(Raven.AppHandler.view.type==Raven.View.VIEW_GL){Raven.AppHandler.view.render(Raven.AppHandler.view.width,Raven.AppHandler.view.height)}Raven.AppHandler.render()};Raven.App.prototype.update=function(){};Raven.App.prototype.render=function(){};Raven.App.prototype.mouseDown=function(e,t){};Raven.App.prototype.mouseMove=function(e,t){};Raven.App.prototype.mouseUp=function(e,t){};Raven.App.prototype.keyDown=function(e){};Raven.App.prototype.keyPress=function(e){};Raven.App.prototype.keyUp=function(e){};Raven.App.prototype.touchDown=function(e,t,n){};Raven.App.prototype.touchMove=function(e,t,n){};Raven.App.prototype.touchUp=function(e,t,n){};Raven.App.prototype.resize=function(e,t){Raven.AppHandler.view.resize(e,t)};Raven.App.prototype.setup=function(e,t,n,r){Raven.AppHandler.canvas=Raven.DOM.getElemID("world");Raven.AppHandler.view=new Raven.View;Raven.AppHandler.view.init(Raven.AppHandler.canvas,n,r?r:{},this.enableRetina);Raven.AppHandler.view.resize(e,t)};Raven.App.prototype.init=function(){Raven.DOM.watch(window,Raven.DOM.RESIZE,Raven.AppHandler.evtHandler);Raven.DOM.watch(Raven.AppHandler.view.canvas,Raven.DOM.MOUSE_DOWN,Raven.AppHandler.evtHandler);Raven.DOM.watch(Raven.AppHandler.view.canvas,Raven.DOM.MOUSE_MOVE,Raven.AppHandler.evtHandler);Raven.DOM.watch(Raven.AppHandler.view.canvas,Raven.DOM.MOUSE_UP,Raven.AppHandler.evtHandler);Raven.DOM.watch(window,Raven.DOM.KEY_DOWN,Raven.AppHandler.evtHandler);Raven.DOM.watch(window,Raven.DOM.KEY_PRESS,Raven.AppHandler.evtHandler);Raven.DOM.watch(window,Raven.DOM.KEY_UP,Raven.AppHandler.evtHandler);if(Raven.AppHandler.supportMobile){Raven.DOM.watch(Raven.AppHandler.view.canvas,Raven.DOM.TOUCH_DOWN,Raven.AppHandler.mobileHandler);Raven.DOM.watch(Raven.AppHandler.view.canvas,Raven.DOM.TOUCH_MOVE,Raven.AppHandler.mobileHandler);Raven.DOM.watch(Raven.AppHandler.view.canvas,Raven.DOM.TOUCH_UP,Raven.AppHandler.mobileHandler);if(window.DeviceOrientationEvent){Raven.DOM.watch(window,Raven.DOM.GYRO_UPDATE,Raven.AppHandler.mobileHandler)}if(window.DeviceMotionEvent){Raven.AppHandler.isMobile=true;Raven.DOM.watch(window,Raven.DOM.ACCELERATION_UPDATE,Raven.AppHandler.mobileHandler)}}if(Raven.AppHandler.fullsize)Raven.AppHandler.resize(window.innerWidth,window.innerHeight)};Raven.App.prototype.dispose=function(){Raven.DOM.unwatch(window,Raven.DOM.RESIZE,Raven.AppHandler.evtHandler);Raven.DOM.unwatch(Raven.AppHandler.view.canvas,Raven.DOM.MOUSE_DOWN,Raven.AppHandler.evtHandler);Raven.DOM.unwatch(Raven.AppHandler.view.canvas,Raven.DOM.MOUSE_MOVE,Raven.AppHandler.evtHandler);Raven.DOM.unwatch(Raven.AppHandler.view.canvas,Raven.DOM.MOUSE_UP,Raven.AppHandler.evtHandler);Raven.DOM.unwatch(Raven.AppHandler.view.canvas,Raven.DOM.TOUCH_DOWN,Raven.AppHandler.mobileHandler);Raven.DOM.unwatch(Raven.AppHandler.view.canvas,Raven.DOM.TOUCH_MOVE,Raven.AppHandler.mobileHandler);Raven.DOM.unwatch(Raven.AppHandler.view.canvas,Raven.DOM.TOUCH_UP,Raven.AppHandler.mobileHandler);Raven.DOM.unwatch(window,Raven.DOM.GYRO_UPDATE,Raven.AppHandler.mobileHandler);Raven.DOM.unwatch(window,Raven.DOM.ACCELERATION_UPDATE,Raven.AppHandler.mobileHandler)}