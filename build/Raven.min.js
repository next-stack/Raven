"use strict";var Raven=Raven||{};Raven.makeInstance=function(e){var t=new e;t.super=e.prototype;return t};Raven.roundTo=function(e,t){return Math.round(t*e)*(1/t)};Raven.DEGREES=180/Math.PI;Raven.RADIANS=Math.PI/180;Raven.resolveAngle=function(e){var t=e%360;return t<0?360+t:t};Raven.degreesToRadians=function(e){return Raven.resolveAngle(e)*Raven.RADIANS};Raven.radiansToDegrees=function(e){return Raven.resolveAngle(e*Raven.DEGREES)};Raven.getAngleRad=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};Raven.getAngleDeg=function(e,t){return Raven.radiansToDegrees(Raven.getAngleRad(e,t))};Raven.distance=function(e,t){var n=e-t;return Math.sqrt(n*n)};Raven.distance2D=function(e,t){return Raven.distance(e.x,t.x)+Raven.distance(e.y,t.y)};Raven.distance3D=function(e,t){return Raven.distance2D(e,t)+Raven.distance(e.z,t.z)};Raven.difference=function(e,t){return e-t};Raven.range=function(e,t,n){var r=Math.min(e,t);var i=Math.max(e,t);var s=i-r;s*=n;return s+r};Raven.randRange=function(e,t){return Raven.range(e,t,Math.random())};Raven.cosRange=function(e,t,n){return(1+Math.cos(Raven.degreesToRadians(e)))*.5*t+n};Raven.constrain=function(e,t,n){return Math.min(t,Math.max(n,e))};Raven.constrain2=function(e,t,n){if(e.x<t.x){e.x=t.x}else if(e.x>n.x){e.x=n.x}if(e.y<t.y){e.y=t.y}else if(e.y>n.y){e.y=n.y}};Raven.constrain3=function(e,t,n){Raven.constrain2(e,t,n);if(e.z<t.z){e.z=t.z}else if(e.z>n.z){e.z=n.z}};Raven.wrap=function(e,t,n){if(e<t){var r=n-t;e=n-Raven.distance(e,t)%r}else if(e>n){e=e%n+t}return e};Raven.wrap2=function(e,t,n){e.x=Raven.wrap(e.x,t.x,n.x);e.y=Raven.wrap(e.y,t.y,n.y);return e};Raven.wrap3=function(e,t,n){e.x=Raven.wrap(e.x,t.x,n.x);e.y=Raven.wrap(e.y,t.y,n.y);e.z=Raven.wrap(e.z,t.z,n.z);return e};Raven.DOM=function(){};Raven.DOM.RESIZE="resize";Raven.DOM.SCROLL="onscroll";Raven.DOM.CLICK="onclick";Raven.DOM.DBL_CLICK="ondblclick";Raven.DOM.MOUSE_MOVE="mousemove";Raven.DOM.MOUSE_DOWN="mousedown";Raven.DOM.MOUSE_UP="mouseup";Raven.DOM.MOUSE_OVER="onmouseover";Raven.DOM.MOUSE_OUT="onmouseout";Raven.DOM.KEY_DOWN="onkeydown";Raven.DOM.KEY_PRESS="onkeypress";Raven.DOM.KEY_UP="onkeyup";Raven.DOM.TOUCH_DOWN="touchstart";Raven.DOM.TOUCH_MOVE="touchmove";Raven.DOM.TOUCH_UP="touchend";Raven.DOM.GYRO_UPDATE="deviceorientation";Raven.DOM.ACCELERATION_UPDATE="devicemotion";Raven.DOM.getElemID=function(e){return document.getElementById(e)};Raven.DOM.watch=function(e,t,n){e.addEventListener(t,function(e){if(n)n(e)},false)};Raven.DOM.unwatch=function(e,t,n){e.removeEventListener(t,function(e){if(n)n(e)})};Raven.DOM.watchID=function(e,t,n){var r=Raven.DOM.getElemID(e);if(!r)return;r[t]=function(){n(e);return false}};Raven.DOM.unwatchID=function(e,t){var n=Raven.DOM.getElemID(e);if(!n)return;n[t]=null}(function(){var e=0;var t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}}());Raven.Vec2=function(e,t){this.x=e;this.y=t;return this};Raven.Vec2.prototype.copy=function(){return new Raven.Vec2(this.x,this.y)};Raven.Vec2.prototype.add=function(e){var t=this.copy();t.x+=e.x;t.y+=e.y;return t};Raven.Vec2.prototype.addN=function(e){var t=this.copy();t.x+=e;t.y+=e;return t};Raven.Vec2.prototype.subtract=function(e){var t=this.copy();this.x-=e.x;this.y-=e.y;return t};Raven.Vec2.prototype.subtractN=function(e){var t=this.copy();t.x-=e;t.y-=e;return t};Raven.Vec2.prototype.multiply=function(e){var t=this.copy();t.x*=e.x;t.y*=e.y;return t};Raven.Vec2.prototype.multiplyN=function(e){var t=this.copy();t.x*=e;t.y*=e;return t};Raven.Vec2.prototype.divide=function(e){var t=this.copy();t.x/=e.x;t.y/=e.y;return t};Raven.Vec2.prototype.divideN=function(e){var t=this.copy();t.x/=e;t.y/=e;return t};Raven.Vec2.prototype.equals=function(e){return this.x==e.x&&this.y==e.y};Raven.Vec2.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Raven.Vec2.prototype.normalize=function(){var e=1/this.length();this.x*=e;this.y*=e;return this};Raven.Vec2.prototype.distance=function(e){return Raven.distance2D(this,e)};Raven.Vec2.zero=function(){return new Raven.Vec2(0,0)};Raven.Vec2.one=function(){return new Raven.Vec2(1,1)};Raven.Vec2.random=function(e,t){return new Raven.Vec2(Math.random()*e,Math.random()*t)};Raven.Vec2.randomRange=function(e,t,n,r){return new Raven.Vec2(Raven.randRange(e,n),Raven.randRange(t,r))};Raven.Vec3=function(e,t,n){this.x=e;this.y=t;this.z=n;return this};Raven.Vec3.prototype.copy=function(){return new Raven.Vec3(this.x,this.y,this.z)};Raven.Vec3.prototype.add=function(e){var t=this.copy();t.x+=e.x;t.y+=e.y;t.z+=e.z;return t};Raven.Vec3.prototype.addN=function(e){var t=this.copy();t.x+=e;t.y+=e;t.z+=e;return t};Raven.Vec3.prototype.subtract=function(e){var t=this.copy();t.x-=e.x;t.y-=e.y;t.z-=e.z;return t};Raven.Vec3.prototype.subtractN=function(e){var t=this.copy();t.x-=e;t.y-=e;t.z-=e;return t};Raven.Vec3.prototype.multiply=function(e){var t=this.copy();t.x*=e.x;t.y*=e.y;t.z*=e.z;return t};Raven.Vec3.prototype.multiplyN=function(e){var t=this.copy();t.x*=e;t.y*=e;t.z*=e;return t};Raven.Vec3.prototype.divide=function(e){var t=this.copy();t.x/=e.x;t.y/=e.y;t.z/=e.z;return t};Raven.Vec3.prototype.divideN=function(e){var t=this.copy();t.x/=e;t.y/=e;t.z/=e;return t};Raven.Vec2.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z};Raven.Vec3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Raven.Vec3.prototype.normalize=function(){var e=1/this.length();this.x*=e;this.y*=e;this.z*=e;return this};Raven.Vec3.prototype.distance=function(e){return Raven.distance3D(this,e)};Raven.Vec3.zero=function(){return new Raven.Vec3(0,0,0)};Raven.Vec3.one=function(){return new Raven.Vec3(1,1,1)};Raven.Vec3.random=function(e,t,n){return new Raven.Vec3(Math.random()*e,Math.random()*t,Math.random()*n)};Raven.Vec3.randomRange=function(e,t,n,r,i,s){return new Raven.Vec3(Raven.randRange(e,r),Raven.randRange(t,i),Raven.randRange(n,s))};Raven.View=function(){};Raven.View.canvas=0;Raven.View.context=0;Raven.View.width=0;Raven.View.height=0;Raven.View.acceleration=new Raven.Vec3.zero;Raven.View.rotation=new Raven.Vec3.zero;Raven.Canvas=function(){};Raven.Canvas.backgroundColor="#000";Raven.Canvas.fillColor="#FFF";Raven.Canvas.strokeColor="#FFF";Raven.Canvas.lineWidth=1;Raven.Canvas.font;Raven.Canvas.size=function(e,t){Raven.View.width=e;Raven.View.height=t;Raven.View.canvas.width=e;Raven.View.canvas.height=t};Raven.Canvas.init=function(e){Raven.View.canvas=e;if(Raven.View.canvas&&Raven.View.canvas.getContext){Raven.View.context=e.getContext("2d");Raven.Canvas.size(Raven.View.canvas.width,Raven.View.canvas.height)}else{console.log("Error establishing canvas (Raven.Canvas.init)")}};Raven.Canvas.update=function(){Raven.View.context.fillColor=this.fillColor;Raven.View.context.strokeColor=this.strokeColor;Raven.View.context.lineWidth=this.lineWidth;Raven.View.context.font=this.font};Raven.Canvas.setContext=function(e){Raven.View.context=e};Raven.Canvas.clear=function(){var e=Raven.Canvas.fillColor;Raven.Canvas.setFillColor(Raven.Canvas.backgroundColor);Raven.Canvas.drawRect(0,0,Raven.View.width,Raven.View.height);Raven.Canvas.setFillColor(e)};Raven.Canvas.setFillColor=function(e){Raven.Canvas.fillColor=e;Raven.View.context.fillStyle=Raven.Canvas.fillColor};Raven.Canvas.setFillColorRGB=function(e,t,n){Raven.Canvas.fillColor="rgb("+e+","+t+","+n+")";Raven.View.context.fillStyle=Raven.Canvas.fillColor};Raven.Canvas.setFillColorRGBA=function(e,t,n,r){Raven.Canvas.fillColor="rgba("+e+","+t+","+n+","+r/255+")";Raven.View.context.fillStyle=Raven.Canvas.fillColor};Raven.Canvas.setBackgroundColorRGB=function(e,t,n){Raven.Canvas.backgroundColor="rgb("+e+","+t+","+n+")"};Raven.Canvas.setBackgroundColorRGBA=function(e,t,n,r){Raven.Canvas.backgroundColor="rgba("+e+","+t+","+n+","+r/255+")"};Raven.Canvas.setFont=function(e){Raven.Canvas.font=e;Raven.View.context.font=Raven.Canvas.font};Raven.Canvas.setStrokeColor=function(e){Raven.Canvas.strokeColor=e;Raven.View.context.strokeStyle=Raven.Canvas.strokeColor};Raven.Canvas.setStrokeColorRGB=function(e,t,n){Raven.Canvas.strokeColor="rgb("+e+","+t+","+n+")";Raven.View.context.strokeStyle=Raven.Canvas.strokeColor};Raven.Canvas.setStrokeColorRGBA=function(e,t,n,r){Raven.Canvas.strokeColor="rgba("+e+","+t+","+n+","+r/255+")";Raven.View.context.strokeStyle=Raven.Canvas.strokeColor};Raven.Canvas.setStrokeWidth=function(e){Raven.Canvas.lineWidth=e;Raven.View.context.lineWidth=e};Raven.Canvas.drawCircle=function(e,t,n,r,i){Raven.View.context.beginPath();Raven.View.context.arc(e,t,n*.5,0,Math.PI*2,false);Raven.View.context.closePath();if(i)Raven.View.context.stroke();if(r)Raven.View.context.fill()};Raven.Canvas.drawFont=function(e,t,n){Raven.View.context.fillText(e,t,n)};Raven.Canvas.drawLine=function(e,t,n,r){Raven.View.context.beginPath();Raven.View.context.moveTo(e,t);Raven.View.context.lineTo(n,r);Raven.View.context.closePath();Raven.View.context.stroke()};Raven.Canvas.drawRect=function(e,t,n,r,i,s){Raven.View.context.fillRect(e,t,n,r);if(s)Raven.View.context.stroke();if(i)Raven.View.context.fill()};Raven.Date=function(){};Raven.Date.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Raven.Date.months=["January","February","March","April","May","June","July","August","September","October","November","December"];Raven.Date.MS_PER_MINUTE=6e4;Raven.Date.MS_PER_HOUR=36e5;Raven.Date.MS_PER_DAY=864e5;Raven.DateObject=function(e){this.seconds=-1;this.minutes=-1;this.hours=-1;this.date=-1;this.day=-1;this.month=-1;this.year=-1;this.milliseconds=-1;this.update(e)};Raven.DateObject.prototype.update=function(e){var t=new Date;if(e!=undefined)t=e;this.seconds=t.getSeconds();this.minutes=t.getMinutes();this.hours=t.getHours();this.day=t.getDay();this.date=t.getDate();this.month=t.getMonth();this.year=t.getFullYear();this.milliseconds=t.getMilliseconds();return this};Raven.DateObject.prototype.totalTime=function(){return this.milliseconds};Raven.DateObject.prototype.monthName=function(){return this.month>=0?String(Raven.Date.months[this.month]):""};Raven.DateObject.prototype.dayName=function(){return this.day>=0?String(Raven.Date.days[this.day]):""};Raven.DateObject.prototype.dayNumber=function(){return this.date};Raven.DateObject.prototype.am=function(){return this.hours<12};Raven.DateObject.prototype.pm=function(){return!this.am};Raven.Date.dateInstance=new Raven.DateObject(new Date);Raven.Date.update=function(){Raven.Date.dateInstance.update()};Raven.Date.timeDifference=function(e,t){var n=Math.abs(e.totalTime-t.totalTime);var r=new Date;r.milliseconds=n;return new Raven.DateObject(r)};Raven.Date.weeksToMS=function(e){return e*daysToMS(7)};Raven.Date.daysToMS=function(e){return e*hoursToMS(24)};Raven.Date.hoursToMS=function(e){return e*minutesToMS(60)};Raven.Date.minutesToMS=function(e){return e*secondsToMS(60)};Raven.Date.secondsToMS=function(e){return e*.001};Raven.Date.msToWeeks=function(e){return e/daysToMS(7)};Raven.Date.msToDays=function(e){return e/hoursToMS(24)};Raven.Date.msToHours=function(e){return e/minutesToMS(60)};Raven.Date.msToMinutes=function(e){return e/secondsToMS(60)};Raven.Date.msToSeconds=function(e){return e*1e3};Raven.Date.getCurrentYear=function(){return Raven.Date.dateInstance.year};Raven.Date.getCurrentMonth=function(){return Raven.Date.dateInstance.month};Raven.Date.getCurrentDay=function(){return Raven.Date.dateInstance.day};Raven.Date.getCurrentDate=function(){return Raven.Date.dateInstance.date};Raven.Date.getCurrentHour=function(){return Raven.Date.dateInstance.hours};Raven.Date.getCurrentMinute=function(){return Raven.Date.dateInstance.minutes};Raven.Date.getCurrentSecond=function(){return Raven.Date.dateInstance.seconds};Raven.StopWatch=function(){this.initTime=0;this.endTime=0;this.lastLap=0;this.ms=0};Raven.StopWatch.prototype.start=function(){this.initTime=getTimer();this.lastLap=this.initTime;this.read();return this};Raven.StopWatch.prototype.stop=function(){this.endTime=getTimer();this.ms=this.endTime-this.initTime;return this};Raven.StopWatch.prototype.read=function(){var e=getTimer();return e-this.initTime};Raven.StopWatch.prototype.lap=function(){var e=getTimer();this.ms=e-this.lastLap;this.lastLap=this.now;return this.ms};Raven.Timer=function(){this.timer=0};Raven.Timer.prototype.start=function(e,t){this.timer=setInterval(t,e)};Raven.Timer.prototype.startFPS=function(e,t){this.start(1e3/e,t)};Raven.Timer.prototype.stop=function(){clearInterval(this.timer)};Raven.frameNum=0;Raven.Interpolation=function(){this.speed=.5;this.spring=.5;this.target=1;this.value=0;this.velocity=0;this.running=false};Raven.Interpolation.prototype={start:function(){this.running=true;return this},stop:function(){this.running=false;return this},update:function(){if(!this.running)return this;this.velocity=(this.target-this.value)*this.speed+this.velocity*this.spring;this.value+=this.velocity;if(Raven.Math.distance(this.value,this.target)<.1&&Raven.Math.roundTo(this.velocity,10)<.1){this.velocity=0;this.value=this.target;this.stop()}return this}};Raven.Event=function(e,t){this.type=e;this.params=t};Raven.EventDispatcher=function(){this.listenerChain={}};Raven.EventDispatcher.prototype.buildListenerChain=function(){if(!this.listenerChain)this.listenerChain={}};Raven.EventDispatcher.prototype.addListener=function(e,t){if(!t instanceof Function)throw{message:"Listener isn't a function"};this.buildListenerChain();if(!this.listenerChain[e]){this.listenerChain[e]=[t]}else{this.listenerChain[e].push(t)}};Raven.EventDispatcher.prototype.hasListener=function(e){return typeof this.listenerChain[e]!="undefined"};Raven.EventDispatcher.prototype.removeListener=function(e,t){if(!this.hasEventListener(e))return false;var n=this.listenerChain[e].length;for(var r=0;r<n;r++){if(this.listenerChain[e][r]==t)this.listenerChain.splice(r,1)}};Raven.EventDispatcher.prototype.dispatchEvent=function(e){this.buildListenerChain();if(!this.hasListener(e.type)){return false}var t=this.listenerChain[e.type].length;for(var n=0;n<t;++n)this.listenerChain[e.type][n](e);return true};Raven.dispatcher=function(){};Raven.dispatcher._instance=new Raven.EventDispatcher;Raven.dispatcher.addListener=function(e,t){return Raven.dispatcher._instance.addListener(e,t)};Raven.dispatcher.hasListener=function(e){return Raven.dispatcher._instance.hasListener(e)};Raven.dispatcher.removeListener=function(e,t){return Raven.dispatcher._instance.removeListener(e,t)};Raven.dispatcher.dispatchEvent=function(e,t){return Raven.dispatcher._instance.dispatchEvent(e,t)};Raven.Physics=function(){};Raven.Physics.Particle=function(e,t,n){this.alive=true;this.acc=Raven.Vec3.zero();this.vel=Raven.Vec3.zero();this.pos=new Raven.Vec3(e?e:0,t?t:0,n?n:0);this.prev=this.pos.copy()};Raven.Physics.Particle.prototype.reset=function(){this.acc=Raven.Vec3.zero();return this};Raven.Physics.Particle.prototype.constrain=function(e,t){Raven.constrain3(this.pos,e,t);return this};Raven.Physics.Particle.prototype.wrap=function(e,t){Raven.wrap3(this.pos,e,t);return this};Raven.Physics.Particle.prototype.movement=function(){return this.acc.length()+this.vel.length()};Raven.Physics.Particle.prototype.update=function(e){this.prev=this.pos;this.vel=this.vel.add(this.acc.multiply(e));this.acc=Raven.Vec3.zero();this.pos=this.pos.add(this.vel.multiply(e));return this};Raven.Physics.Particle.prototype.difference=function(e){return new Raven.Vec3(Raven.difference(this.pos.x,e.pos.x),Raven.difference(this.pos.y,e.pos.y),Raven.difference(this.pos.z,e.pos.z))};Raven.Physics.Particle.prototype.dampen=function(e){this.acc=this.acc.subtract(this.vel.multiply(e));return this};Raven.Physics.F_GRAVITY=0;Raven.Physics.F_LINEAR=1;Raven.Physics.F_ROTATIONAL=2;Raven.Physics.Force=function(){this.pos=new Raven.Vec3.zero;this.size=100;this.strength=new Raven.Vec3(.1,.1,.1);this.type=Raven.Physics.F_GRAVITY;return this};Raven.Physics.LinearForce=function(){this.pos=new Raven.Vec3.zero;this.size=100;this.strength=new Raven.Vec3(.1,.1,.1);this.type=Raven.Physics.F_LINEAR;this.direction=0;this.directionStrength=1;return this};Raven.Physics.RotationalForce=function(){this.pos=new Raven.Vec3.zero;this.size=100;this.strength=new Raven.Vec3(.1,.1,.1);this.type=Raven.Physics.F_ROTATIONAL;this.rotationStrength=-45;return this};Raven.Physics.Force.prototype.applyForce=function(e,t,n,r){t=t.divideN(n);e.acc=e.acc.add(t.multiply(r));if(n<1&&e.movement()<.5)e.alive=false;return this};Raven.Physics.LinearForce.prototype.applyForce=function(e,t,n,r){var i=Raven.degreesToRadians(this.direction);e.vel.x+=Math.cos(i)*r.x*this.directionStrength;e.vel.y+=Math.sin(i)*r.y*this.directionStrength;return this};Raven.Physics.RotationalForce.prototype.applyForce=function(e,t,n,r){var i=Raven.getAngleRad(t,t,new Raven.Vec2.zero)+Raven.degreesToRadians(this.rotationStrength);e.vel.x+=Math.cos(i)*r.x;e.vel.y+=Math.sin(i)*r.y;return this};Raven.Physics.Force.prototype.update=Raven.Physics.LinearForce.prototype.update=Raven.Physics.RotationalForce.prototype.update=function(e){var t=e.length;if(t<1)return;var n;var r;var i;for(var s=0;s<t;++s){i=e[s];var o=i.difference(this);r=o.length();if(r<this.size){r=Math.sqrt(r);n=this.strength.multiplyN(1-r/this.size);this.applyForce(i,o,r,n)}}};Raven.Physics.ParticleController=function(){this.forces=[];this.particles=[];this.time=Raven.Vec3.one()};Raven.Physics.ParticleController.prototype.addParticle=function(e){this.particles.push(e)};Raven.Physics.ParticleController.prototype.addParticlePos=function(e,t,n){this.addParticle(new Raven.Physics.Particle(e,t,n))};Raven.Physics.ParticleController.prototype.removeParticle=function(e){this.particles.splice(e,1)};Raven.Physics.ParticleController.prototype.totalParticles=function(){return this.particles.length};Raven.Physics.ParticleController.prototype.addForce=function(e){this.forces.push(e)};Raven.Physics.ParticleController.prototype.removeForce=function(e){this.forces.splice(e,1)};Raven.Physics.ParticleController.prototype.totalForces=function(){return this.forces.length};Raven.Physics.ParticleController.prototype.update=function(){var e=this.totalForces();for(var t=0;t<e;++t){this.forces[t].update(this.particles)}var n=Raven.Vec2.zero();var r=new Raven.Vec2(Raven.View.width,Raven.View.height);var i=.01;var s=new Raven.Vec3(i,i,i);for(t=0;t<this.totalParticles();++t){this.particles[t].update(this.time);this.particles[t].dampen(s);this.particles[t].wrap(n,r);if(!this.particles[t].alive||Raven.roundTo(this.particles[t].movement(),100)==0)this.removeParticle(t)}};Raven.AppHandler=this;Raven.App=function(){this.frameRate=60;this.autoClear=true;this.fullsize=true;this.supportMobile=false;this.mouseX=-1;this.mouseY=-1;this.touchPoints=[];this.isMobile=false;this.browserName=navigator.appName,this.browserCodeName=navigator.appCodeName;this.browserVersion=navigator.appVersion;this.cookieEnabled=navigator.cookieEnabled;this.platform=navigator.platform;Raven.AppHandler=this};Raven.App.prototype.resize=function(e,t){Raven.Canvas.size(e,t)};Raven.App.prototype.setup=function(e,t){Raven.Canvas.init(Raven.DOM.getElemID("world"));this.resize(e,t)};Raven.App.prototype.update=function(){};Raven.App.prototype.render=function(){};Raven.App.prototype.mouseDown=function(e,t){};Raven.App.prototype.mouseMove=function(e,t){};Raven.App.prototype.mouseUp=function(e,t){};Raven.App.prototype.touchDown=function(e,t){};Raven.App.prototype.touchMove=function(e,t){};Raven.App.prototype.touchUp=function(e,t){};Raven.App.prototype.acceleration=function(e){};Raven.App.prototype.gyro=function(e){};Raven.App.updateHandler=function(){Raven.AppHandler.update();Raven.App.renderHandler();++Raven.frameNum};Raven.App.renderHandler=function(){if(Raven.AppHandler.autoClear)Raven.Canvas.clear();Raven.AppHandler.render()};Raven.App.prototype.mobileHandler=function(e){e.preventDefault();Raven.AppHandler.touchPoints=[];if(e.targetTouches){var t=e.targetTouches.length;for(var n=0;n<t;++n){Raven.AppHandler.touchPoints[n]={id:e.targetTouches[n].identifier,x:e.targetTouches[n].clientX,y:e.targetTouches[n].clientY}}}switch(e.type){case Raven.DOM.TOUCH_DOWN:if(e.clientX<Raven.View.width&&e.clientY<Raven.View.height){Raven.AppHandler.touchHandler(e);Raven.AppHandler.touchDown(e.clientX,e.clientY)}break;case Raven.DOM.TOUCH_MOVE:if(e.clientX<Raven.View.width&&e.clientY<Raven.View.height){Raven.AppHandler.touchHandler(e);Raven.AppHandler.touchMove(e.clientX,e.clientY)}break;case Raven.DOM.TOUCH_UP:if(e.clientX<Raven.View.width&&e.clientY<Raven.View.height){Raven.AppHandler.touchHandler(e);Raven.AppHandler.touchUp(e.clientX,e.clientY)}break;case Raven.DOM.GYRO_UPDATE:Raven.View.rotation.x=Raven.roundTo(e.beta,100);Raven.View.rotation.y=Raven.roundTo(e.alpha,100);Raven.View.rotation.z=Raven.roundTo(e.gamma,100);Raven.AppHandler.gyro(Raven.View.rotation);break;case Raven.DOM.ACCELERATION_UPDATE:Raven.View.acceleration.x=Raven.roundTo(e.accelerationIncludingGravity.x/9.81,100);Raven.View.acceleration.y=Raven.roundTo(e.accelerationIncludingGravity.y/9.81,100);Raven.View.acceleration.z=Raven.roundTo(e.accelerationIncludingGravity.z/9.81,100);Raven.AppHandler.acceleration(Raven.View.acceleration);break}};Raven.App.prototype.evtHandler=function(e){switch(e.type){case Raven.DOM.RESIZE:if(Raven.AppHandler.fullsize){Raven.AppHandler.resize(window.innerWidth,window.innerHeight)}Raven.App.renderHandler();break;case Raven.DOM.MOUSE_DOWN:if(e.clientX<Raven.View.width&&e.clientY<Raven.View.height){Raven.AppHandler.mouseX=e.clientX;Raven.AppHandler.mouseY=e.clientY;Raven.AppHandler.mouseDown(e.clientX,e.clientY)}break;case Raven.DOM.MOUSE_MOVE:if(e.clientX<Raven.View.width&&e.clientY<Raven.View.height){Raven.AppHandler.mouseX=e.clientX;Raven.AppHandler.mouseY=e.clientY;Raven.AppHandler.mouseMove(e.clientX,e.clientY)}break;case Raven.DOM.MOUSE_UP:if(e.clientX<Raven.View.width&&e.clientY<Raven.View.height){Raven.AppHandler.mouseUp(e.clientX,e.clientY);Raven.AppHandler.mouseX=-1;Raven.AppHandler.mouseY=-1}break}};Raven.App.prototype.init=function(){Raven.DOM.watch(window,Raven.DOM.RESIZE,this.evtHandler);Raven.DOM.watch(document,Raven.DOM.MOUSE_DOWN,this.evtHandler);Raven.DOM.watch(document,Raven.DOM.MOUSE_MOVE,this.evtHandler);Raven.DOM.watch(document,Raven.DOM.MOUSE_UP,this.evtHandler);if(Raven.AppHandler.supportMobile){Raven.DOM.watch(Raven.View.canvas,Raven.DOM.TOUCH_DOWN,this.mobileHandler);Raven.DOM.watch(Raven.View.canvas,Raven.DOM.TOUCH_MOVE,this.mobileHandler);Raven.DOM.watch(Raven.View.canvas,Raven.DOM.TOUCH_UP,this.mobileHandler);if(window.DeviceOrientationEvent){this.isMobile=true;Raven.DOM.watch(window,Raven.DOM.GYRO_UPDATE,this.mobileHandler)}if(window.DeviceMotionEvent){this.isMobile=true;Raven.DOM.watch(window,Raven.DOM.ACCELERATION_UPDATE,this.mobileHandler)}}if(Raven.AppHandler.fullsize)Raven.AppHandler.resize(window.innerWidth,window.innerHeight)};Raven.App.prototype.dispose=function(){Raven.DOM.unwatch(window,Raven.DOM.RESIZE,this.evtHandler);Raven.DOM.unwatch(document,Raven.DOM.MOUSE_DOWN,this.evtHandler);Raven.DOM.unwatch(document,Raven.DOM.MOUSE_MOVE,this.evtHandler);Raven.DOM.unwatch(document,Raven.DOM.MOUSE_UP,this.evtHandler);Raven.DOM.unwatch(Raven.View.canvas,Raven.DOM.TOUCH_DOWN,this.mobileHandler);Raven.DOM.unwatch(Raven.View.canvas,Raven.DOM.TOUCH_MOVE,this.mobileHandler);Raven.DOM.unwatch(Raven.View.canvas,Raven.DOM.TOUCH_UP,this.mobileHandler);Raven.DOM.unwatch(window,Raven.DOM.GYRO_UPDATE,this.mobileHandler);Raven.DOM.unwatch(window,Raven.DOM.ACCELERATION_UPDATE,this.mobileHandler)};Raven.App.prototype.autoRender=function(){window.requestAnimationFrame(Raven.AppHandler.autoRender);Raven.App.updateHandler()}